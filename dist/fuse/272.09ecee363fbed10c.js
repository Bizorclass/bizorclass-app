"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[272],{2272:(M,r,u)=>{u.r(r),u.d(r,{SubscribedStudentModule:()=>l});var m=u(9299),f=u(5861),h=u(7579),p=u(2722),t=u(4650),S=u(5830),b=u(877),x=u(7274),a=u(7155);function g(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," No. "),t.qZA())}function v(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.hij(" ",null==i?null:i.index," ")}}function C(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Student\xa0Name "),t.qZA())}function T(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.hij(" ",null==i?null:i.student_name," ")}}function _(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Teacher\xa0Name "),t.qZA())}function Z(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.hij(" ",null==i?null:i.teacher_name," ")}}function A(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Subscription\xa0Plan "),t.qZA())}function D(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.hij(" ",null==i?null:i.subscription," ")}}function y(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Start\xa0Date "),t.qZA())}function N(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=n.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.getDateString(null==i?null:i.start_date)," ")}}function Y(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," End\xa0Date "),t.qZA())}function U(e,n){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const i=n.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.getDateString(null==i?null:i.end_date)," ")}}function j(e,n){1&e&&t._UZ(0,"tr",18)}function B(e,n){1&e&&t._UZ(0,"tr",19)}class s{constructor(n,i,o){this.apiService=n,this._authService=i,this.dialog=o,this.user=null,this.displayedColumns=["index","student_name","teacher_name","subscription","start_date","end_date"],this.dataSource=[],this._unsubscribeAll=new h.x,this._authService.user.pipe((0,p.R)(this._unsubscribeAll)).subscribe(c=>{this.user=c,c&&c?.teacher_id&&this.getAllScheduleByTeacherIdFromServer()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getAllScheduleByTeacherIdFromServer(){var n=this;this.apiService.getTeacherSubscribersStudentByTeacherId(this.user.teacher_id).subscribe(function(){var i=(0,f.Z)(function*(o){console.log(o),o.data&&(n.dataSource=o.data.map((d,H)=>({...d,index:H+1,student_name:`${d?.student_id?.first_name} ${d?.student_id?.last_name}`,subscription:d.subscription_plan_id.title,teacher_name:`${d?.teacher_id?.first_name} ${d?.teacher_id?.last_name}`,start_date:d?.order[0]?.start_date||"--",end_date:d?.order[0]?.end_date||"--"})),console.log(n.dataSource))});return function(o){return i.apply(this,arguments)}}(),i=>{console.log(i)})}getDateString(n){return n?new Date(n).toDateString():"--"}}s.\u0275fac=function(n){return new(n||s)(t.Y36(S.s),t.Y36(b.e),t.Y36(x.uw))},s.\u0275cmp=t.Xpm({type:s,selectors:[["subscribed-student"]],decls:28,vars:3,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","sm:flex-row","md:flex-row","flex-auto","justify-between","py-8","border-b"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],["tabindex","0",1,"overflow-auto"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","index"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","student_name"],["matColumnDef","teacher_name"],["matColumnDef","subscription"],["matColumnDef","start_date"],["matColumnDef","end_date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5," Subscribers Students "),t.qZA()()(),t.TgZ(6,"section",4)(7,"table",5),t.ynx(8,6),t.YNc(9,g,2,0,"th",7),t.YNc(10,v,2,1,"td",8),t.BQk(),t.ynx(11,9),t.YNc(12,C,2,0,"th",7),t.YNc(13,T,2,1,"td",8),t.BQk(),t.ynx(14,10),t.YNc(15,_,2,0,"th",7),t.YNc(16,Z,2,1,"td",8),t.BQk(),t.ynx(17,11),t.YNc(18,A,2,0,"th",7),t.YNc(19,D,2,1,"td",8),t.BQk(),t.ynx(20,12),t.YNc(21,y,2,0,"th",7),t.YNc(22,N,2,1,"td",8),t.BQk(),t.ynx(23,13),t.YNc(24,Y,2,0,"th",7),t.YNc(25,U,2,1,"td",8),t.BQk(),t.YNc(26,j,1,0,"tr",14),t.YNc(27,B,1,0,"tr",15),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk],encapsulation:2});var Q=u(4859),$=u(7392),w=u(4466),R=u(9549),F=u(284),J=u(2371);const z=[{path:"",component:s}];class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[m.Bz.forChild(z),a.p0,F.c,Q.ot,$.Ps,R.lN,J.Yy,w.m]})}}]);