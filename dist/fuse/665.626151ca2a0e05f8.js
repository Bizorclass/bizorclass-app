"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[665],{4665:(J,u,a)=>{a.r(u),a.d(u,{ClassesModule:()=>o});var m=a(9299),f=a(7155),g=a(4859),h=a(7392),x=a(4466),v=a(9549),_=a(284),C=a(2371),T=a(5861),y=a(7579),A=a(2722),e=a(4650),Z=a(5830),S=a(877),I=a(7274),p=a(6895);function b(s,n){if(1&s&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null==t||null==t.student_id?null:t.student_id.degree)}}function N(s,n){1&s&&(e.TgZ(0,"div",16)(1,"div",17),e._uU(2," Transfer Request Pending "),e.qZA()())}function W(s,n){1&s&&(e.TgZ(0,"div",16)(1,"div",18),e._uU(2," Transfer Request Reject "),e.qZA()())}function w(s,n){1&s&&(e.TgZ(0,"div",16)(1,"div",19),e._uU(2," Transfer Request Accept "),e.qZA()())}function U(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"img",10),e.NdJ("error",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.onTeacherImgError(r))}),e.qZA(),e.TgZ(3,"div",11),e._uU(4),e.YNc(5,b,2,1,"div",5),e.qZA()(),e.TgZ(6,"div",12)(7,"p")(8,"span",13),e._uU(9,"Date : "),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"p")(12,"span",13),e._uU(13,"Time : "),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"p")(16,"span",13),e._uU(17,"Address : "),e.qZA(),e._uU(18),e.qZA(),e.YNc(19,N,3,0,"div",14),e.YNc(20,W,3,0,"div",14),e.YNc(21,w,3,0,"div",14),e.TgZ(22,"button",15),e.NdJ("click",function(){const l=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.openMap(l))}),e._uU(23," Open map "),e.qZA()()()}if(2&s){const t=n.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("src",null==t||null==t.student_id?null:t.student_id.photo_url,e.LSH),e.xp6(2),e.AsE(" ",null==t||null==t.student_id?null:t.student_id.first_name," ",null==t||null==t.student_id?null:t.student_id.last_name," "),e.xp6(1),e.Q6J("ngIf",null==t||null==t.student_id?null:t.student_id.degree),e.xp6(5),e.hij(" ",i.getDateString(t),""),e.xp6(4),e.hij(" ",i.getTimeString(t),""),e.xp6(4),e.hij(" ",t.address,""),e.xp6(1),e.Q6J("ngIf",null==t?null:t.isChangeRequestPending),e.xp6(1),e.Q6J("ngIf",null==t?null:t.isChangeRequestReject),e.xp6(1),e.Q6J("ngIf",null==t?null:t.isChangeRequestAccept)}}function D(s,n){if(1&s&&(e.TgZ(0,"div",6),e.YNc(1,U,24,10,"div",7),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.dataSource)}}function j(s,n){1&s&&(e.ynx(0),e.TgZ(1,"div",20),e._uU(2,"No classes scheduled"),e.qZA(),e.BQk())}class d{constructor(n,t,i){this.apiService=n,this._authService=t,this.dialog=i,this.user=null,this.displayedColumns=["index","student_name","start_date","end_date","start_time","end_time"],this.dataSource=[],this.isLoading=!1,this._unsubscribeAll=new y.x,this._authService.user.pipe((0,A.R)(this._unsubscribeAll)).subscribe(r=>{this.user=r,r&&r?.teacher_id&&this.getTodayAllOrdersByTeacherIdFromServer()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}getTodayAllOrdersByTeacherIdFromServer(){var n=this;this.isLoading=!0,this.apiService.getOngoingOrderByTeacherId(this.user.teacher_id).subscribe(function(){var t=(0,T.Z)(function*(i){console.log(i),i.data&&(n.dataSource=i.data.map((l,c)=>({...l,index:c+1,student_name:`${l?.student_id?.first_name} ${l?.student_id?.last_name}`,start_time:l?.start_time||"--",end_time:l?.end_time||"--",start_date:new Date(l.start_date).toDateString()||"__/__/____",end_date:new Date(l.end_date).toDateString()||"__/__/____"})),console.log(n.dataSource)),n.isLoading=!1});return function(i){return t.apply(this,arguments)}}(),t=>{console.log(t),this.isLoading=!1})}openMap(n){console.log(n),n?.latitude&&n?.longitude&&window.open(`https://maps.google.com/maps?q=${n?.latitude},${n?.longitude}`,"_blank")}getDateString(n){return`${new Date(n?.start_date).toDateString()} - ${new Date(n?.end_date).toDateString()}`}getTimeString(n){return`${this.time24to12Convert(n?.start_time)} - ${this.time24to12Convert(n?.end_time)}`}time24to12Convert(n){const[t,i]=n.split(":"),r=+t%24;return(r%12||12)+":"+i+(r<12?" AM":" PM")}onTeacherImgError(n){n.target.src="../../../../assets/images/avatars/dummy user.png"}}d.\u0275fac=function(n){return new(n||d)(e.Y36(Z.s),e.Y36(S.e),e.Y36(I.uw))},d.\u0275cmp=e.Xpm({type:d,selectors:[["classes"]],decls:7,vars:2,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex-auto","p-4","md:p-10","flex","flex-col"],[1,"flex-[1]","rounded-md","w-full","flex","flex-col"],[1,"text-[1.5rem]","font-bold"],["class","myClassesTeacherCardWrapper",4,"ngIf"],[4,"ngIf"],[1,"myClassesTeacherCardWrapper"],["class","cardBox",4,"ngFor","ngForOf"],[1,"cardBox"],[1,"teacherNameAndImageWrapper"],["alt","",1,"teacherImage",3,"src","error"],[1,"teacherName","text-white"],[1,"classInfoWrapper"],[1,"font-bold"],["class","flex justify-end",4,"ngIf"],[1,"backgroundLight","text-white","font-bold","py-2","px-4","rounded-full","w-full","mt-4",3,"click"],[1,"flex","justify-end"],[1,"chipItem","text-white","bg-blue-500"],[1,"chipItem","text-white","bg-red-500"],[1,"chipItem","text-white","bg-green-500"],[1,"noDataWrapper"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"My Classes"),e.qZA(),e.YNc(5,D,2,1,"div",4),e.YNc(6,j,3,0,"ng-container",5),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("ngIf",(null==t.dataSource?null:t.dataSource.length)>0),e.xp6(1),e.Q6J("ngIf",0===(null==t.dataSource?null:t.dataSource.length)))},dependencies:[p.sg,p.O5],styles:[".myClassesTeacherCardWrapper{display:flex;flex-direction:column;flex-wrap:wrap}.myClassesTeacherCardWrapper .cardBox{padding:.5rem;margin:5px 0;border-radius:10px;display:flex;flex-direction:column;background:var(--color-light)!important}.myClassesTeacherCardWrapper .cardBox .teacherNameAndImageWrapper{display:flex;flex-direction:row}.myClassesTeacherCardWrapper .cardBox .teacherNameAndImageWrapper .teacherImage{width:60px;height:60px;object-fit:cover;border-radius:50%;background:white}.myClassesTeacherCardWrapper .cardBox .teacherNameAndImageWrapper .teacherName{font-size:1rem;flex:1;margin:0 0 0 10px!important}.myClassesTeacherCardWrapper .cardBox .classInfoWrapper{display:flex;flex-direction:column;flex:1;color:#fff;margin-top:5px;font-size:.8}.chipItem{width:-moz-fit-content;width:fit-content;border-radius:34px;padding:4px .8rem;font-size:.8rem;margin-top:5px}.noDataWrapper{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:1.1rem}\n"],encapsulation:2});const B=[{path:"",component:d}];class o{}o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(B),f.p0,_.c,g.ot,h.Ps,v.lN,C.Yy,x.m]})}}]);