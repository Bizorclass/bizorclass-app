"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[719],{7719:(Ut,U,r)=>{r.r(U),r.d(U,{CoursesModule:()=>S});var D=r(9299),F=r(4859),q=r(6709),w=r(9549),N=r(7392),Q=r(284),V=r(8255),_=r(6895),t=r(4650),j=r(7579),k=r(4385),B=r(266),O=r(3238),x=r(1281);function K(n,i){if(1&n&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function X(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",16)(1,"mat-select",17),t.NdJ("selectionChange",function(s){t.CHM(e);const a=t.oxw(2);return t.KtG(a._changePageSize(s.value))}),t.YNc(2,K,2,2,"mat-option",18),t.qZA()()}if(2&n){const e=t.oxw(2);t.Q6J("appearance",e._formFieldAppearance)("color",e.color),t.xp6(1),t.Q6J("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),t.xp6(1),t.Q6J("ngForOf",e._displayedPageSizeOptions)}}function H(n,i){if(1&n&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.pageSize)}}function W(n,i){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13),t._uU(2),t.qZA(),t.YNc(3,X,3,8,"mat-form-field",14),t.YNc(4,H,2,1,"div",15),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.s9C("id",e._pageSizeLabelId),t.xp6(1),t.hij(" ",e._intl.itemsPerPageLabel," "),t.xp6(1),t.Q6J("ngIf",e._displayedPageSizeOptions.length>1),t.xp6(1),t.Q6J("ngIf",e._displayedPageSizeOptions.length<=1)}}function tt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.firstPage())}),t.O4$(),t.TgZ(1,"svg",7),t._UZ(2,"path",22),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),t.uIk("aria-label",e._intl.firstPageLabel)}}function et(n,i){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.lastPage())}),t.O4$(),t.TgZ(1,"svg",7),t._UZ(2,"path",24),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),t.uIk("aria-label",e._intl.lastPageLabel)}}let A=(()=>{class n{constructor(){this.changes=new j.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,o,s)=>{if(0==s||0==o)return`0 of ${s}`;const a=e*o;return`${a+1} \u2013 ${a<(s=Math.max(s,0))?Math.min(a+o,s):a+o} of ${s}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nt={provide:A,deps:[[new t.FiY,new t.tp0,A]],useFactory:function it(n){return n||new A}},st=new t.OlP("MAT_PAGINATOR_DEFAULT_OPTIONS"),at=(0,O.Id)((0,O.dB)(class{}));let rt=(()=>{class n extends at{constructor(e,o,s){if(super(),this._intl=e,this._changeDetectorRef=o,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new t.vpe,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),s){const{pageSize:a,pageSizeOptions:c,hidePageSize:u,showFirstLastButtons:f}=s;null!=a&&(this._pageSize=a),null!=c&&(this._pageSizeOptions=c),null!=u&&(this._hidePageSize=u),null!=f&&(this._showFirstLastButtons=f)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max((0,x.su)(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=(0,x.su)(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max((0,x.su)(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(o=>(0,x.su)(o)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=(0,x.Ig)(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=(0,x.Ig)(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const s=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(s)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,o)=>e-o),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(e){t.$Z()},n.\u0275dir=t.lG2({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[t.qOj]}),n})(),ct=0,Y=(()=>{class n extends rt{constructor(e,o,s){super(e,o,s),this._pageSizeLabelId="mat-paginator-page-size-label-"+ct++,this._formFieldAppearance=s?.formFieldAppearance||"outline"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A),t.Y36(t.sBO),t.Y36(st,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[t.qOj],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,W,5,4,"div",2),t.TgZ(3,"div",3)(4,"div",4),t._uU(5),t.qZA(),t.YNc(6,tt,3,5,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.previousPage()}),t.O4$(),t.TgZ(8,"svg",7),t._UZ(9,"path",8),t.qZA()(),t.kcU(),t.TgZ(10,"button",9),t.NdJ("click",function(){return o.nextPage()}),t.O4$(),t.TgZ(11,"svg",7),t._UZ(12,"path",10),t.qZA()(),t.YNc(13,et,3,5,"button",11),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!o.hidePageSize),t.xp6(3),t.hij(" ",o._intl.getRangeLabel(o.pageIndex,o.pageSize,o.length)," "),t.xp6(1),t.Q6J("ngIf",o.showFirstLastButtons),t.xp6(1),t.Q6J("matTooltip",o._intl.previousPageLabel)("matTooltipDisabled",o._previousButtonsDisabled())("matTooltipPosition","above")("disabled",o._previousButtonsDisabled()),t.uIk("aria-label",o._intl.previousPageLabel),t.xp6(3),t.Q6J("matTooltip",o._intl.nextPageLabel)("matTooltipDisabled",o._nextButtonsDisabled())("matTooltipPosition","above")("disabled",o._nextButtonsDisabled()),t.uIk("aria-label",o._intl.nextPageLabel),t.xp6(3),t.Q6J("ngIf",o.showFirstLastButtons))},dependencies:[_.sg,_.O5,F.RK,w.KE,k.gD,O.ey,B.gM],styles:[".mat-mdc-paginator{display:block}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[nt],imports:[_.ez,F.ot,k.LD,B.AV]}),n})();var R=r(3162),M=r(6308),pt=r(455),ut=r(4466);class z{constructor(){}}z.\u0275fac=function(i){return new(i||z)},z.\u0275cmp=t.Xpm({type:z,selectors:[["courses"]],decls:1,vars:0,template:function(i,e){1&i&&t._UZ(0,"router-outlet")},dependencies:[D.lC],encapsulation:2,changeDetection:0});var J=r(5861),l=r(4006),E=r(2722),gt=r(6451),d=r(3900),m=r(4004),dt=r(8288),mt=r(7401),v=r(1135),b=r(8505),h=r(5698),$=r(2843),ht=r(9646),G=r(9300),ft=r(529);class p{constructor(i){this._httpClient=i,this._brands=new v.X(null),this._categories=new v.X(null),this._pagination=new v.X(null),this._product=new v.X(null),this._products=new v.X(null),this._tags=new v.X(null),this._vendors=new v.X(null)}get brands$(){return this._brands.asObservable()}get categories$(){return this._categories.asObservable()}get pagination$(){return this._pagination.asObservable()}get product$(){return this._product.asObservable()}get products$(){return this._products.asObservable()}get tags$(){return this._tags.asObservable()}get vendors$(){return this._vendors.asObservable()}getBrands(){return this._httpClient.get("api/apps/ecommerce/inventory/brands").pipe((0,b.b)(i=>{this._brands.next(i)}))}getCategories(){return this._httpClient.get("api/apps/ecommerce/inventory/categories").pipe((0,b.b)(i=>{this._categories.next(i)}))}getProducts(i=0,e=10,o="name",s="asc",a=""){return this._httpClient.get("api/apps/ecommerce/inventory/products",{params:{page:""+i,size:""+e,sort:o,order:s,search:a}}).pipe((0,b.b)(c=>{this._pagination.next(c.pagination),this._products.next(c.products)}))}getProductById(i){return this._products.pipe((0,h.q)(1),(0,m.U)(e=>{const o=e.find(s=>s.id===i)||null;return this._product.next(o),o}),(0,d.w)(e=>e?(0,ht.of)(e):(0,$._)("Could not found product with id of "+i+"!")))}createProduct(){return this.products$.pipe((0,h.q)(1),(0,d.w)(i=>this._httpClient.post("api/apps/ecommerce/inventory/product",{}).pipe((0,m.U)(e=>(this._products.next([e,...i]),e)))))}updateProduct(i,e){return this.products$.pipe((0,h.q)(1),(0,d.w)(o=>this._httpClient.patch("api/apps/ecommerce/inventory/product",{id:i,product:e}).pipe((0,m.U)(s=>{const a=o.findIndex(c=>c.id===i);return o[a]=s,this._products.next(o),s}),(0,d.w)(s=>this.product$.pipe((0,h.q)(1),(0,G.h)(a=>a&&a.id===i),(0,b.b)(()=>(this._product.next(s),s)))))))}deleteProduct(i){return this.products$.pipe((0,h.q)(1),(0,d.w)(e=>this._httpClient.delete("api/apps/ecommerce/inventory/product",{params:{id:i}}).pipe((0,m.U)(o=>{const s=e.findIndex(a=>a.id===i);return e.splice(s,1),this._products.next(e),o}))))}getTags(){return this._httpClient.get("api/apps/ecommerce/inventory/tags").pipe((0,b.b)(i=>{this._tags.next(i)}))}createTag(i){return this.tags$.pipe((0,h.q)(1),(0,d.w)(e=>this._httpClient.post("api/apps/ecommerce/inventory/tag",{tag:i}).pipe((0,m.U)(o=>(this._tags.next([...e,o]),o)))))}updateTag(i,e){return this.tags$.pipe((0,h.q)(1),(0,d.w)(o=>this._httpClient.patch("api/apps/ecommerce/inventory/tag",{id:i,tag:e}).pipe((0,m.U)(s=>{const a=o.findIndex(c=>c.id===i);return o[a]=s,this._tags.next(o),s}))))}deleteTag(i){return this.tags$.pipe((0,h.q)(1),(0,d.w)(e=>this._httpClient.delete("api/apps/ecommerce/inventory/tag",{params:{id:i}}).pipe((0,m.U)(o=>{const s=e.findIndex(a=>a.id===i);return e.splice(s,1),this._tags.next(e),o}),(0,G.h)(o=>o),(0,d.w)(o=>this.products$.pipe((0,h.q)(1),(0,m.U)(s=>(s.forEach(a=>{const c=a.tags.findIndex(u=>u===i);c>-1&&a.tags.splice(c,1)}),o)))))))}getVendors(){return this._httpClient.get("api/apps/ecommerce/inventory/vendors").pipe((0,b.b)(i=>{this._vendors.next(i)}))}}p.\u0275fac=function(i){return new(i||p)(t.LFG(ft.eN))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});var _t=r(5830),vt=r(877);function xt(n,i){1&n&&(t.TgZ(0,"div",13),t._UZ(1,"mat-progress-bar",14),t.qZA()),2&n&&(t.xp6(1),t.Q6J("mode","indeterminate"))}function bt(n,i){1&n&&t.GkF(0)}const Ct=function(n){return{$implicit:n}};function yt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,bt,1,0,"ng-container",26),t.BQk()),2&n){const e=t.oxw().$implicit;t.oxw(4);const o=t.MAs(14);t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(2,Ct,e))}}function Tt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",22)(2,"div",23),t._uU(3),t.qZA(),t.TgZ(4,"div")(5,"button",24),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw(4);return t.KtG(c.toggleDetails(a.course_id))}),t._UZ(6,"mat-icon",25),t.qZA()()(),t.TgZ(7,"div",16),t.YNc(8,yt,2,4,"ng-container",10),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit,o=t.oxw(4);t.xp6(3),t.hij(" ",e.title," "),t.xp6(3),t.Q6J("svgIcon",(null==o.selectedCourse?null:o.selectedCourse.course_id)===e.course_id?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),t.xp6(2),t.Q6J("ngIf",(null==o.selectedCourse?null:o.selectedCourse.course_id)===e.course_id)}}function Pt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Tt,9,3,"ng-container",21),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.courseList)("ngForTrackBy",e.trackByFn)}}const It=function(n){return{"pointer-events-none":n}},St=function(){return[5,10,25,100]};function zt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",16)(2,"div",17)(3,"div",18),t._uU(4,"Name"),t.qZA(),t.TgZ(5,"div",19),t._uU(6,"Details"),t.qZA()(),t.YNc(7,Pt,2,2,"ng-container",10),t.qZA(),t._UZ(8,"mat-paginator",20),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("mat-sort-header","name"),t.xp6(4),t.Q6J("ngIf",e.courseList),t.xp6(1),t.Q6J("ngClass",t.VKq(8,It,e.isLoading))("length",e.pagination.length)("pageIndex",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.DdM(10,St))("showFirstLastButtons",!0)}}function Zt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,zt,9,11,"ng-container",15),t.BQk()),2&n){const e=t.oxw(),o=t.MAs(16);t.xp6(1),t.Q6J("ngIf",e.courseList.length>0)("ngIfElse",o)}}function Lt(n,i){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Title"),t.qZA())}function Ft(n,i){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"Description"),t.qZA())}function wt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",45)(2,"mat-form-field",46),t.YNc(3,Lt,2,0,"mat-label",10),t._UZ(4,"input",47),t.qZA(),t.TgZ(5,"mat-form-field",48),t.YNc(6,Ft,2,0,"mat-label",10),t._UZ(7,"input",49),t.qZA()(),t.BQk()),2&n){const e=i.$implicit,o=i.first;t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("formControl",e.get("title"))("placeholder","Title")("spellcheck",!1),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("formControl",e.get("description"))("placeholder","Description")}}function Ot(n,i){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",51),t.TgZ(2,"span",52),t._uU(3,"Product updated"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:check"))}function At(n,i){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",53),t.TgZ(2,"span",52),t._uU(3,"An error occurred, try again!"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"))}function Mt(n,i){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,Ot,4,1,"ng-container",10),t.YNc(2,At,4,1,"ng-container",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","success"===e.flashMessage),t.xp6(1),t.Q6J("ngIf","error"===e.flashMessage)}}function Dt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"form",29)(3,"div",30)(4,"div",31)(5,"div",32)(6,"div",33),t._uU(7,"Course Details"),t.qZA(),t.TgZ(8,"mat-form-field",34)(9,"mat-label"),t._uU(10,"Name"),t.qZA(),t._UZ(11,"input",35),t.qZA(),t.TgZ(12,"mat-form-field",34)(13,"mat-label"),t._uU(14,"Description"),t.qZA(),t._UZ(15,"textarea",36),t.qZA()(),t.TgZ(16,"div",37)(17,"div",33),t._uU(18,"Subjects"),t.qZA(),t.TgZ(19,"div",38),t.YNc(20,wt,8,9,"ng-container",21),t.qZA(),t.TgZ(21,"div",39),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addSubjectField())}),t._UZ(22,"mat-icon",25),t.TgZ(23,"span",40),t._uU(24,"Add an subject"),t.qZA()()()()(),t.TgZ(25,"div",41)(26,"div",42),t.YNc(27,Mt,3,2,"div",43),t.TgZ(28,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.updateSelectedCourse())}),t._uU(29),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.selectedCourseForm),t.xp6(9),t.Q6J("formControlName","title"),t.xp6(4),t.Q6J("formControlName","description"),t.xp6(5),t.Q6J("ngForOf",e.selectedCourseForm.get("subjects").controls)("ngForTrackBy",e.trackByFn),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:plus-circle"),t.xp6(5),t.Q6J("ngIf",e.flashMessage),t.xp6(1),t.Q6J("disabled",e.selectedCourseForm.invalid)("color","primary"),t.xp6(1),t.hij(" ","new_course_id"===(null==e.selectedCourse?null:e.selectedCourse.course_id)?"Save":"Update"," ")}}function kt(n,i){1&n&&(t.TgZ(0,"div",54),t._uU(1,"There are no Courses!"),t.qZA())}class Z{constructor(i,e,o,s,a,c){this._changeDetectorRef=i,this._fuseConfirmationService=e,this._formBuilder=o,this._inventoryService=s,this.apiService=a,this.authService=c,this.courseList=[],this.flashMessage=null,this.isLoading=!1,this.pagination={length:this.courseList.length,size:10,page:0,lastPage:Math.ceil(this.courseList.length/10),startIndex:0,endIndex:9},this.searchInputControl=new l.p4,this.selectedCourse=null,this.user=null,this._unsubscribeAll=new j.x,this.authService.user.pipe((0,E.R)(this._unsubscribeAll)).subscribe(u=>{this.user=u})}ngOnInit(){this.getAllCoursesFromServer()}defaultForm(){this.selectedCourseForm=this._formBuilder.group({course_id:[""],title:["",[l.kI.required]],description:["",[l.kI.required]],subjects:this._formBuilder.array([])})}getAllCoursesFromServer(){var i=this;this.apiService.getAllCourseWithSubject().subscribe(function(){var e=(0,J.Z)(function*(o){if(console.log(o),o.data){let a=o.data;for(var s=0;s<a.length;s++)a[s].subjects=a[s].subject,delete a[s].subject;i.courseList=[...a],i._changeDetectorRef.detectChanges()}i.selectedCourse=null,i.closeDetails(),i.defaultForm()});return function(o){return e.apply(this,arguments)}}(),e=>{console.log(e)})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,E.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0,this.closeDetails()}),(0,gt.T)(this._sort.sortChange,this._paginator.page).pipe((0,d.w)(()=>(this.closeDetails(),this.isLoading=!0,this._inventoryService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,m.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleDetails(i){if(this.selectedCourse&&this.selectedCourse.course_id===i)return this.selectedCourse=null,this.closeDetails(),void this.defaultForm();this.defaultForm();const e=this.courseList.find(s=>s.course_id===i);this.selectedCourse={...e},this.selectedCourseForm.patchValue({...e});const o=[];e?.subjects?.length>0?e.subjects.forEach(s=>{o.push(this._formBuilder.group({subject_id:[s.subject_id],title:[s.title,[l.kI.required]],description:[s.description,[l.kI.required]]}))}):o.push(this._formBuilder.group({title:["",[l.kI.required]],description:["",[l.kI.required]]})),o.forEach(s=>{this.selectedCourseForm.get("subjects").push(s)}),this._changeDetectorRef.markForCheck()}addSubjectField(){const i=this._formBuilder.group({title:["",[l.kI.required]],description:["",[l.kI.required]]});this.selectedCourseForm.get("subjects").push(i),this._changeDetectorRef.markForCheck()}closeDetails(){this.selectedCourse=null}createCourse(){this.courseList.some(e=>"new_course_id"===e.course_id)||this.courseList.unshift({course_id:"new_course_id",title:"",description:"",subjects:[{title:"",description:""}]}),this.toggleDetails("new_course_id")}updateSelectedCourse(){var i=this;const e=this.selectedCourseForm.getRawValue();if("new_course_id"===e.course_id){const o={title:e.title,description:e.description,admin_id:this.user.admin_id};console.log("coursePostObject => ",o),this.apiService.addCourse(o).subscribe(function(){var s=(0,J.Z)(function*(a){console.log(a),a.data&&e?.subjects&&e?.subjects.length>0&&e?.subjects.forEach((c,u)=>{i.apiService.addSubjectToCourse({title:c.title,description:c.description,course_id:a.data.course_id,admin_id:i.user.admin_id}).subscribe(g=>{console.log(g),e?.subjects.length-1===u&&i.getAllCoursesFromServer()},g=>{console.log(g)})})});return function(a){return s.apply(this,arguments)}}(),s=>{console.log(s)})}else{const o={title:e.title,description:e.description,course_id:e.course_id};console.log("coursePostObject => ",o),this.apiService.updateCourseById(o).subscribe(function(){var s=(0,J.Z)(function*(a){console.log(a),a.data&&e?.subjects&&e?.subjects.length>0&&e?.subjects.forEach((c,u)=>{c?.subject_id?i.apiService.updateSubjectById({title:c.title,description:c.description}).subscribe(g=>{console.log(g),e?.subjects.length-1===u&&i.getAllCoursesFromServer()},g=>{console.log(g)}):i.apiService.addSubjectToCourse({title:c.title,description:c.description,course_id:a.data.course_id,admin_id:i.user.admin_id}).subscribe(g=>{console.log(g),e?.subjects.length-1===u&&i.getAllCoursesFromServer()},g=>{console.log(g)})})});return function(a){return s.apply(this,arguments)}}(),s=>{console.log(s)})}}deleteSelectedProduct(){this._fuseConfirmationService.open({title:"Delete product",message:"Are you sure you want to remove this product? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(e=>{if("confirmed"===e){const o=this.selectedCourseForm.getRawValue();this._inventoryService.deleteProduct(o.id).subscribe(()=>{this.closeDetails()})}})}showFlashMessage(i){this.flashMessage=i,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}}Z.\u0275fac=function(i){return new(i||Z)(t.Y36(t.sBO),t.Y36(mt.R),t.Y36(l.QS),t.Y36(p),t.Y36(_t.s),t.Y36(vt.e))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["courses-list"]],viewQuery:function(i,e){if(1&i&&(t.Gf(Y,5),t.Gf(M.YE,5)),2&i){let o;t.iGM(o=t.CRH())&&(e._paginator=o.first),t.iGM(o=t.CRH())&&(e._sort=o.first)}},decls:17,vars:4,consts:[[1,"sm:absolute","sm:inset-0","flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-8","px-6","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-4xl","font-extrabold","tracking-tight"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-flat-button","",1,"ml-4",3,"color","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],[4,"ngIf"],["rowDetailsTemplate",""],["noCourses",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"inventory-grid","z-10","sticky","top-0","grid","gap-4","py-4","px-6","md:px-8","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"block"],[1,"sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inventory-grid","grid","items-center","gap-4","py-3","px-6","md:px-8","border-b"],[1,""],["mat-stroked-button","",1,"min-w-10","min-h-7","h-7","px-2","leading-6",3,"click"],[1,"icon-size-5",3,"svgIcon"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"shadow-lg","overflow-hidden"],[1,"flex","border-b"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","p-8"],[1,"flex","flex-auto","flex-wrap"],[1,"flex","flex-col","w-full","lg:w-2/4"],[1,"text-xl","font-medium","tracking-tight","mb-4"],[1,"w-full"],["matInput","",3,"formControlName"],["matInput","","rows","5",3,"formControlName"],[1,"flex","flex-col","w-full","lg:w-2/4","lg:pl-8"],[1,"space-y-4"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4","rounded","cursor-pointer",3,"click"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"flex","items-center","justify-end","w-full","border-t","px-8","py-4"],[1,"flex","items-center"],["class","flex items-center mr-4",4,"ngIf"],["mat-flat-button","",3,"disabled","color","click"],[1,"flex"],[1,"flex-auto","w-full","max-w-40","sm:max-w-40s",3,"subscriptSizing"],["matInput","","type","text",3,"formControl","placeholder","spellcheck"],[1,"flex-auto","ml-2","sm:ml-4",3,"subscriptSizing"],["matInput","","type","text",3,"formControl","placeholder"],[1,"flex","items-center","mr-4"],[1,"text-green-500",3,"svgIcon"],[1,"ml-2"],[1,"text-red-500",3,"svgIcon"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,xt,2,1,"div",2),t.TgZ(3,"div",3),t._uU(4,"Courses"),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return e.createCourse()}),t._UZ(7,"mat-icon",6),t.TgZ(8,"span",7),t._uU(9,"Add"),t.qZA()()()(),t.TgZ(10,"div",8)(11,"div",9),t.YNc(12,Zt,2,2,"ng-container",10),t.YNc(13,Dt,30,10,"ng-template",null,11,t.W1O),t.YNc(15,kt,2,0,"ng-template",null,12,t.W1O),t.qZA()()()),2&i&&(t.xp6(2),t.Q6J("ngIf",e.isLoading),t.xp6(4),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(5),t.Q6J("ngIf",e.courseList))},dependencies:[F.lW,w.KE,w.hX,N.Hw,Q.Nt,Y,R.pW,M.YE,M.nU,_.mk,_.sg,_.O5,_.tP,l._Y,l.Fj,l.JJ,l.JL,l.oH,l.sg,l.u],styles:[".inventory-grid{grid-template-columns:auto 72px}@media (min-width: 600px){.inventory-grid{grid-template-columns:auto 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:auto 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:auto 72px}}\n"],encapsulation:2,data:{animation:dt.L},changeDetection:0});var Bt=r(262);class C{constructor(i){this._inventoryService=i}resolve(i,e){return this._inventoryService.getBrands()}}C.\u0275fac=function(i){return new(i||C)(t.LFG(p))},C.\u0275prov=t.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"});class y{constructor(i){this._inventoryService=i}resolve(i,e){return this._inventoryService.getCategories()}}y.\u0275fac=function(i){return new(i||y)(t.LFG(p))},y.\u0275prov=t.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"});class L{constructor(i,e){this._inventoryService=i,this._router=e}resolve(i,e){return this._inventoryService.getProductById(i.paramMap.get("id")).pipe((0,Bt.K)(o=>{console.error(o);const s=e.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(s),(0,$._)(o)}))}}L.\u0275fac=function(i){return new(i||L)(t.LFG(p),t.LFG(D.F0))},L.\u0275prov=t.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"});class T{constructor(i){this._inventoryService=i}resolve(i,e){return this._inventoryService.getProducts()}}T.\u0275fac=function(i){return new(i||T)(t.LFG(p))},T.\u0275prov=t.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"});class P{constructor(i){this._inventoryService=i}resolve(i,e){return this._inventoryService.getTags()}}P.\u0275fac=function(i){return new(i||P)(t.LFG(p))},P.\u0275prov=t.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"});class I{constructor(i){this._inventoryService=i}resolve(i,e){return this._inventoryService.getVendors()}}I.\u0275fac=function(i){return new(i||I)(t.LFG(p))},I.\u0275prov=t.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"});const Jt=[{path:"",pathMatch:"full",redirectTo:"courses-list"},{path:"courses-list",component:z,children:[{path:"",component:Z,resolve:{brands:C,categories:y,products:T,tags:P,vendors:I}}]}];class S{}S.\u0275fac=function(i){return new(i||S)},S.\u0275mod=t.oAB({type:S}),S.\u0275inj=t.cJS({imports:[D.Bz.forChild(Jt),F.ot,q.p9,w.lN,N.Ps,Q.c,V.Tx,lt,R.Cv,O.si,M.JX,k.LD,pt.rP,B.AV,ut.m]})}}]);