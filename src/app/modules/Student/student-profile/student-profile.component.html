<div class="flex flex-col w-full">
  <!-- View mode -->
  <ng-container *ngIf="!editMode">
    <!-- Header -->
    <!-- <div class="relative w-full h-40 sm:h-48 px-8 sm:px-12 bg-accent-100 dark:bg-accent-700">
      <ng-container *ngIf="studentObject?.background">
        <img class="absolute inset-0 object-cover w-full h-full" [src]="studentObject?.background" />
      </ng-container>
    </div> -->

    <!-- admin -->
    <div
      class="relative flex flex-col flex-auto items-center p-6 pt-0 sm:p-12 sm:pt-0"
    >
      <div class="w-full max-w-3xl">
        <!-- Avatar and actions -->
        <div class="flex flex-auto items-end mt-4">
          <!-- Avatar -->
          <div
            class="flex items-center justify-center w-32 h-32 rounded-full overflow-hidden ring-4 ring-bg-card"
          >
            <img
              class="object-cover w-full h-full"
              *ngIf="studentObject?.photo_url"
              [src]="studentObject?.photo_url"
            />
            <div
              class="flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200"
              *ngIf="!studentObject?.photo_url"
            >
              {{ studentObject?.first_name?.charAt(0) }}
            </div>
          </div>
          <!-- Actions -->
          <div class="flex items-center ml-auto mb-1">
            <button mat-stroked-button (click)="toggleEditMode(true)">
              <mat-icon
                class="icon-size-5"
                [svgIcon]="'heroicons_solid:pencil-alt'"
              ></mat-icon>
              <span class="ml-2">Edit</span>
            </button>
          </div>
        </div>

        <!-- First Name -->
        <div class="mt-3 text-4xl font-bold truncate">
          {{ studentObject?.first_name }} {{ studentObject?.last_name }}
        </div>

        <div class="flex flex-col mt-4 pt-6 border-t space-y-8">
          <!-- Title -->
          <ng-container *ngIf="studentObject?.email">
            <!-- Email -->
            <div class="flex">
              <mat-icon [svgIcon]="'heroicons_outline:mail'"></mat-icon>
              <div class="min-w-0 ml-6 space-y-1">
                <div class="flex items-center leading-6">
                  <a
                    class="hover:underline text-primary-500"
                    [href]="'mailto:' + studentObject?.email"
                    target="_blank"
                  >
                    {{ studentObject?.email }}
                  </a>
                </div>
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="studentObject?.about_you">
            <div class="flex">
              <mat-icon [svgIcon]="'heroicons_outline:menu-alt-2'"></mat-icon>
              <div class="max-w-none ml-6 prose prose-sm">
                {{ studentObject?.about_you }}
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="studentObject?.age">
            <div class="flex">
              <mat-icon [svgIcon]="'heroicons_outline:calculator'"></mat-icon>
              <div class="max-w-none ml-6 prose prose-sm">
                {{ studentObject?.age }}
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="studentObject?.home_address">
            <div class="flex">
              <mat-icon [svgIcon]="'heroicons_outline:home'"></mat-icon>
              <div class="max-w-none ml-6 prose prose-sm">
                {{ studentObject?.home_address }}
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="studentObject?.phone_number">
            <div class="flex">
              <mat-icon [svgIcon]="'heroicons_outline:phone'"></mat-icon>
              <div class="max-w-none ml-6 prose prose-sm">
                {{ studentObject?.phone_number }}
              </div>
            </div>
          </ng-container>

          <ng-container *ngIf="studentObject?.school_name">
            <div class="flex">
              <mat-icon [svgIcon]="'heroicons_outline:academic-cap'"></mat-icon>
              <div class="max-w-none ml-6 prose prose-sm">
                {{ studentObject?.school_name }}
              </div>
            </div>
          </ng-container>

          <!-- <ng-container *ngIf="studentObject?.subjects.length">
                        <div class="flex">
                            <mat-icon [svgIcon]="'heroicons_outline:book-open'"></mat-icon>
                            <div class="min-w-0 ml-6 space-y-1">
                                <ng-container *ngFor="let subjectItem of studentObject?.subjects; trackBy: trackByFn">
                                    <div class="flex items-center leading-6">
                                        <div class="ml-2.5 font-mono" [matTooltip]="'Course Name'">{{subjectItem?.subject_id?.course_id.title}}</div>
                                        <div class="text-md truncate text-secondary">
                                            <span class="mx-2">&bull;</span>
                                            <span class="font-medium" [matTooltip]="'Subject Name'">{{subjectItem?.subject_id?.title}}</span>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </ng-container> -->

          <!-- <ng-container *ngIf="studentObject?.board?.length">
                        <div class="flex">
                            <mat-icon [svgIcon]="'heroicons_outline:book-open'"></mat-icon>
                            <div class="min-w-0 ml-6 space-y-1">
                                <ng-container *ngFor="let boardItem of studentObject?.board; trackBy: trackByFn">
                                    <div class="flex items-center leading-6">
                                        <div class="ml-2.5 font-mono" [matTooltip]="'Course Name'">{{boardItem}}</div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </ng-container> -->

          <!-- <ng-container *ngIf="studentObject?.language?.length">
                        <div class="flex">
                            <mat-icon [svgIcon]="'heroicons_outline:globe-alt'"></mat-icon>
                            <div class="min-w-0 ml-6 space-y-1">
                                <ng-container *ngFor="let languageItem of studentObject?.language; trackBy: trackByFn">
                                    <div class="flex items-center leading-6">
                                        <div class="ml-2.5 font-mono" [matTooltip]="'Course Name'">{{languageItem}}</div>
                                    </div>
                                </ng-container>
                            </div>
                        </div>
                    </ng-container> -->
        </div>
      </div>
    </div>
  </ng-container>

  <!-- Edit mode -->
  <ng-container *ngIf="editMode">
    <!-- Header -->
    <!-- <div
      class="relative w-full h-40 px-8 sm:px-12 bg-accent-100 dark:bg-accent-700"
    >

      <ng-container *ngIf="studentObject?.background">
        <img
          class="absolute inset-0 object-cover w-full h-full"
          [src]="studentObject?.background"
        />
      </ng-container>

      <div class="flex items-center justify-end w-full max-w-3xl mx-auto pt-6">
        <a
          class="bg-gray-700"
          mat-icon-button
          [matTooltip]="'Close'"
          (click)="toggleEditMode(false)"
        >
          <mat-icon
            class="text-white"
            [svgIcon]="'heroicons_outline:x'"
          ></mat-icon>
        </a>
      </div>
    </div> -->

    <!-- Contact form -->
    <div class="relative flex flex-col flex-auto items-center px-6 sm:px-12">
      <div class="w-full max-w-3xl">
        <form [formGroup]="teacherForm">
          <!-- Avatar -->
          <div class="flex flex-auto justify-center items-end mt-4">
            <div
              class="relative flex items-center justify-center w-32 h-32 rounded-full overflow-hidden ring-4 ring-bg-card"
            >
              <!-- Upload / Remove avatar -->
              <div class="absolute inset-0 bg-black bg-opacity-50 z-10"></div>
              <div
                class="absolute inset-0 flex items-center justify-center z-20"
              >
                <div>
                  <input
                    id="avatar-file-input"
                    class="absolute h-0 w-0 opacity-0 invisible pointer-events-none"
                    type="file"
                    [multiple]="false"
                    [accept]="'image/jpeg, image/png'"
                    (change)="uploadAvatar(avatarFileInput.files)"
                    #avatarFileInput
                  />
                  <label
                    class="flex items-center justify-center w-10 h-10 rounded-full cursor-pointer hover:bg-hover"
                    for="avatar-file-input"
                    matRipple
                  >
                    <mat-icon
                      class="text-white"
                      [svgIcon]="'heroicons_outline:camera'"
                    ></mat-icon>
                  </label>
                </div>
                <!-- <div>
                                    <button
                                        mat-icon-button
                                        (click)="removeAvatar()">
                                        <mat-icon
                                            class="text-white"
                                            [svgIcon]="'heroicons_outline:trash'"></mat-icon>
                                    </button>
                                </div> -->
              </div>
              <!-- Image/Letter -->
              <img
                class="object-cover w-full h-full"
                *ngIf="avatarObject || studentObject?.photo_url"
                [src]="
                  avatarObject
                    ? imageFileTOString(avatarObject)
                    : studentObject?.photo_url
                "
              />
              <div
                class="flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200"
                *ngIf="!studentObject?.photo_url"
              >
                {{ studentObject?.first_name.charAt(0) }}
              </div>
            </div>
          </div>

          <!-- First Name -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>First Name</mat-label>
              <mat-icon
                matPrefix
                class="hidden sm:flex icon-size-5"
                [svgIcon]="'heroicons_solid:user-circle'"
              ></mat-icon>
              <input
                matInput
                [formControlName]="'first_name'"
                [placeholder]="'First Name'"
                [spellcheck]="false"
              />
              <mat-error> First name is required </mat-error>
            </mat-form-field>
          </div>

          <!-- Last Name -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Last Name</mat-label>
              <mat-icon
                matPrefix
                class="hidden sm:flex icon-size-5"
                [svgIcon]="'heroicons_solid:user-circle'"
              ></mat-icon>
              <input
                matInput
                [formControlName]="'last_name'"
                [placeholder]="'Last Name'"
                [spellcheck]="false"
              />
              <mat-error> Last name is required </mat-error>
            </mat-form-field>
          </div>

          <!-- City -->
          <!-- <div class="mt-8">
                        <mat-form-field
                            class="w-full"
                            [subscriptSizing]="'dynamic'">
                            <mat-label>City</mat-label>
                            <mat-icon
                                matPrefix
                                class="hidden sm:flex icon-size-5"
                                [svgIcon]="'heroicons_solid:home'"></mat-icon>
                            <input
                                matInput
                                [formControlName]="'city'"
                                [placeholder]="'City'"
                                [spellcheck]="false">
                                <mat-error>
                                    City is required
                                </mat-error>
                        </mat-form-field>
                    </div> -->

          <!-- Email -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Email</mat-label>
              <mat-icon
                matPrefix
                class="hidden sm:flex icon-size-5"
                [svgIcon]="'heroicons_solid:mail'"
              ></mat-icon>
              <input
                matInput
                type="email"
                [formControlName]="'email'"
                [placeholder]="'Email address'"
                [spellcheck]="false"
              />
              <mat-error *ngIf="teacherForm.get('email').hasError('required')">
                Email address is required
              </mat-error>
              <mat-error *ngIf="teacherForm.get('email').hasError('email')">
                Please enter a valid email address
              </mat-error>
            </mat-form-field>
          </div>

          <!-- DOB field -->
          <div class="mt-8">
            <mat-form-field class="w-full">
              <mat-label>Date Of Birth</mat-label>
              <input
                matInput
                [matDatepicker]="dobRef"
                disabled
                (focus)="dobRef.open()"
                [formControlName]="'dob'"
              />
              <mat-datepicker-toggle
                matIconSuffix
                [for]="dobRef"
              ></mat-datepicker-toggle>
              <mat-datepicker #dobRef></mat-datepicker>
              <mat-error> Gender is required </mat-error>
            </mat-form-field>
          </div>

          <!-- home_address -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Home Address</mat-label>
              <input
                matInput
                type="text"
                [formControlName]="'home_address'"
                [placeholder]="'Home Address'"
                [spellcheck]="false"
              />
              <mat-error> Home Address is required </mat-error>
            </mat-form-field>
          </div>

          <!-- about_you -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>About description</mat-label>
              <textarea
                matInput
                type="text"
                [formControlName]="'about_you'"
                [placeholder]="'About description'"
                [spellcheck]="false"
              ></textarea>
              <mat-error> About description is required </mat-error>
            </mat-form-field>
          </div>

          <!-- Father name -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Father name</mat-label>
              <input
                matInput
                type="text"
                [formControlName]="'father_name'"
                [placeholder]="'Father name'"
                [spellcheck]="false"
              />
              <mat-error> Father name is required </mat-error>
            </mat-form-field>
          </div>

          <!-- Mother name -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Mother name</mat-label>
              <input
                matInput
                type="text"
                [formControlName]="'mother_name'"
                [placeholder]="'Mother name'"
                [spellcheck]="false"
              />
              <mat-error> Mother name is required </mat-error>
            </mat-form-field>
          </div>

          <!-- Gender -->
          <div class="mt-8">
            <mat-form-field class="w-full radioWrapper">
              <mat-label>Gender</mat-label>
              <input
                id="gender"
                matInput
                [formControlName]="'gender'"
                style="display: none"
              />
              <mat-radio-group
                class="flex flex-row"
                [formControlName]="'gender'"
              >
                <mat-radio-button class="mb-2" value="male">
                  Male
                </mat-radio-button>
                <mat-radio-button class="mb-2" value="female">
                  Female
                </mat-radio-button>
              </mat-radio-group>
              <!-- <mat-error *ngIf="signUpForm.get('gender').hasError('required')"> -->
              <mat-error> Gender is required </mat-error>
            </mat-form-field>
          </div>

          <!-- phone number -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Phone Number</mat-label>
              <input
                matInput
                type="text"
                [formControlName]="'phone_number'"
                [placeholder]="'Phone number'"
                [spellcheck]="false"
              />
              <mat-error> Phone number is required </mat-error>
            </mat-form-field>
          </div>

          <!-- Parent phone number -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Parent Phone Number</mat-label>
              <input
                matInput
                type="text"
                [formControlName]="'parent_phone_number'"
                [placeholder]="'Parent phone number'"
                [spellcheck]="false"
              />
              <mat-error> Parent phone number is required </mat-error>
            </mat-form-field>
          </div>

          <!-- School name -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>School name</mat-label>
              <input
                matInput
                type="text"
                [formControlName]="'school_name'"
                [placeholder]="'School name'"
                [spellcheck]="false"
              />
              <mat-error> School name is required </mat-error>
            </mat-form-field>
          </div>

          <!-- Class -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Class</mat-label>
              <input
                matInput
                type="text"
                [formControlName]="'class'"
                [placeholder]="'Class'"
                [spellcheck]="false"
              />
              <mat-error> Class is required </mat-error>
            </mat-form-field>
          </div>

          <!-- roll_no -->
          <div class="mt-8">
            <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
              <mat-label>Roll no</mat-label>
              <input
                matInput
                min="0"
                type="number"
                [formControlName]="'roll_no'"
                [placeholder]="'Roll no'"
                [spellcheck]="false"
              />
              <mat-error> Roll no is required </mat-error>
            </mat-form-field>
          </div>

          <!-- Actions -->
          <div
            class="flex items-center mt-10 -mx-6 sm:-mx-12 py-4 pr-4 pl-1 sm:pr-12 sm:pl-7 border-t bg-gray-50 dark:bg-transparent"
          >
            <!-- Delete -->
            <!-- <button
                            *ngIf="studentObject?.student_id"
                            mat-button
                            [color]="'warn'"
                            [matTooltip]="'Delete'"
                            (click)="deleteContact()">
                            Delete
                        </button> -->
            <!-- Cancel -->
            <button
              class="ml-auto"
              mat-button
              [matTooltip]="'Cancel'"
              (click)="
                studentObject?.student_id ? toggleEditMode(false) : goBack()
              "
            >
              Cancel
            </button>
            <!-- Save -->
            <button
              class="ml-2"
              [disabled]="teacherForm.invalid"
              mat-flat-button
              [color]="'primary'"
              [matTooltip]="'Save'"
              (click)="updateContact()"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </ng-container>
</div>
